<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">
    <changeSet id="create-security-tables" author="abondarev">
        <sql>
            create table users(
            username varchar(50) not null primary key,
            password varchar(50) not null,
            enabled boolean not null
            );

            create table authorities (
            username varchar(50) not null,
            authority varchar(50) not null,
            constraint fk_authorities_users foreign key(username) references users(username)
            );
            create unique index ix_auth_username on authorities (username,authority);
        </sql>
    </changeSet>
    <changeSet id="fill-security-table" author="abondarev">
        <sql>
            INSERT INTO users(username, password, enabled) VALUES ('user', '1234', true);
            INSERT INTO authorities(username, authority) VALUES ('user', 'ROLE_USER');
        </sql>
    </changeSet>
</databaseChangeLog>
